#!/usr/bin/swift
import Foundation

let str = "{\"type\":98,\"operand\":\"\",\"children\":[{\"type\":80,\"operand\":\"\",\"children\":[{\"type\":17,\"operand\":\"main\",\"children\":[]},{\"type\":97,\"operand\":\"\",\"children\":[{\"type\":66,\"operand\":\"\",\"children\":[{\"type\":17,\"operand\":\"main\",\"children\":[]}]},{\"type\":0,\"operand\":\"\",\"children\":[{\"type\":17,\"operand\":\"in\",\"children\":[]}]},{\"type\":6,\"operand\":\"\",\"children\":[{\"type\":17,\"operand\":\"in\",\"children\":[]},{\"type\":18,\"operand\":10,\"children\":[]}]},{\"type\":65,\"operand\":\"\",\"children\":[{\"type\":81,\"operand\":\"\",\"children\":[{\"type\":17,\"operand\":\"main\",\"children\":[]}]},{\"type\":67,\"operand\":\"\",\"children\":[{\"type\":17,\"operand\":\"fib\",\"children\":[]}]}]}]},{\"type\":97,\"operand\":\"\",\"children\":[{\"type\":66,\"operand\":\"\",\"children\":[{\"type\":17,\"operand\":\"fib\",\"children\":[]}]},{\"type\":0,\"operand\":\"\",\"children\":[{\"type\":17,\"operand\":\"0\",\"children\":[]}]},{\"type\":6,\"operand\":\"\",\"children\":[{\"type\":17,\"operand\":\"0\",\"children\":[]},{\"type\":18,\"operand\":0,\"children\":[]}]},{\"type\":0,\"operand\":\"\",\"children\":[{\"type\":17,\"operand\":\"1\",\"children\":[]}]},{\"type\":6,\"operand\":\"\",\"children\":[{\"type\":17,\"operand\":\"1\",\"children\":[]},{\"type\":18,\"operand\":1,\"children\":[]}]},{\"type\":0,\"operand\":\"\",\"children\":[{\"type\":17,\"operand\":\"iter\",\"children\":[]}]},{\"type\":6,\"operand\":\"\",\"children\":[{\"type\":17,\"operand\":\"iter\",\"children\":[]},{\"type\":18,\"operand\":2,\"children\":[]}]},{\"type\":97,\"operand\":\"\",\"children\":[{\"type\":66,\"operand\":\"\",\"children\":[{\"type\":17,\"operand\":\"loop\",\"children\":[]}]},{\"type\":0,\"operand\":\"\",\"children\":[{\"type\":99,\"operand\":\"\",\"children\":[{\"type\":1,\"operand\":\"\",\"children\":[{\"type\":17,\"operand\":\"iter\",\"children\":[]}]}]}]},{\"type\":6,\"operand\":\"\",\"children\":[{\"type\":99,\"operand\":\"\",\"children\":[{\"type\":1,\"operand\":\"\",\"children\":[{\"type\":17,\"operand\":\"iter\",\"children\":[]}]}]},{\"type\":32,\"operand\":\"\",\"children\":[{\"type\":1,\"operand\":\"\",\"children\":[{\"type\":99,\"operand\":\"\",\"children\":[{\"type\":33,\"operand\":\"\",\"children\":[{\"type\":1,\"operand\":\"\",\"children\":[{\"type\":17,\"operand\":\"iter\",\"children\":[]}]},{\"type\":18,\"operand\":1,\"children\":[]}]}]}]},{\"type\":1,\"operand\":\"\",\"children\":[{\"type\":99,\"operand\":\"\",\"children\":[{\"type\":33,\"operand\":\"\",\"children\":[{\"type\":1,\"operand\":\"\",\"children\":[{\"type\":17,\"operand\":\"iter\",\"children\":[]}]},{\"type\":18,\"operand\":2,\"children\":[]}]}]}]}]}]},{\"type\":2,\"operand\":\"\",\"children\":[{\"type\":99,\"operand\":\"\",\"children\":[{\"type\":33,\"operand\":\"\",\"children\":[{\"type\":1,\"operand\":\"\",\"children\":[{\"type\":17,\"operand\":\"iter\",\"children\":[]}]},{\"type\":18,\"operand\":2,\"children\":[]}]}]}]},{\"type\":96,\"operand\":\"\",\"children\":[{\"type\":52,\"operand\":\"\",\"children\":[{\"type\":1,\"operand\":\"\",\"children\":[{\"type\":17,\"operand\":\"iter\",\"children\":[]}]},{\"type\":1,\"operand\":\"\",\"children\":[{\"type\":17,\"operand\":\"in\",\"children\":[]}]}]},{\"type\":97,\"operand\":\"\",\"children\":[]},{\"type\":97,\"operand\":\"\",\"children\":[{\"type\":6,\"operand\":\"\",\"children\":[{\"type\":17,\"operand\":\"iter\",\"children\":[]},{\"type\":32,\"operand\":\"\",\"children\":[{\"type\":1,\"operand\":\"\",\"children\":[{\"type\":17,\"operand\":\"iter\",\"children\":[]}]},{\"type\":18,\"operand\":1,\"children\":[]}]}]},{\"type\":64,\"operand\":\"\",\"children\":[{\"type\":67,\"operand\":\"\",\"children\":[{\"type\":17,\"operand\":\"loop\",\"children\":[]}]}]}]}]}]},{\"type\":0,\"operand\":\"\",\"children\":[{\"type\":17,\"operand\":\"output\",\"children\":[]}]},{\"type\":6,\"operand\":\"\",\"children\":[{\"type\":17,\"operand\":\"output\",\"children\":[]},{\"type\":1,\"operand\":\"\",\"children\":[{\"type\":99,\"operand\":\"\",\"children\":[{\"type\":1,\"operand\":\"\",\"children\":[{\"type\":17,\"operand\":\"iter\",\"children\":[]}]}]}]}]}]}]}]}"
// let str = "{\"type\":98,\"operand\":\"\",\"children\":[{\"type\":80,\"operand\":\"\",\"children\":[{\"type\":17,\"operand\":\"main\",\"children\":[]},{\"type\":97,\"operand\":\"\",\"children\":[{\"type\":66,\"operand\":\"\",\"children\":[{\"type\":17,\"operand\":\"main\",\"children\":[]}]},{\"type\":0,\"operand\":\"\",\"children\":[{\"type\":17,\"operand\":\"in\",\"children\":[]}]},{\"type\":6,\"operand\":\"\",\"children\":[{\"type\":17,\"operand\":\"in\",\"children\":[]},{\"type\":18,\"operand\":10,\"children\":[]}]},{\"type\":65,\"operand\":\"\",\"children\":[{\"type\":81,\"operand\":\"\",\"children\":[{\"type\":17,\"operand\":\"main\",\"children\":[]}]},{\"type\":67,\"operand\":\"\",\"children\":[{\"type\":17,\"operand\":\"fib\",\"children\":[]}]}]}]},{\"type\":97,\"operand\":\"\",\"children\":[{\"type\":66,\"operand\":\"\",\"children\":[{\"type\":17,\"operand\":\"fib\",\"children\":[]}]},{\"type\":0,\"operand\":\"\",\"children\":[{\"type\":17,\"operand\":\"0\",\"children\":[]}]},{\"type\":6,\"operand\":\"\",\"children\":[{\"type\":17,\"operand\":\"0\",\"children\":[]},{\"type\":18,\"operand\":0,\"children\":[]}]},{\"type\":0,\"operand\":\"\",\"children\":[{\"type\":17,\"operand\":\"1\",\"children\":[]}]},{\"type\":6,\"operand\":\"\",\"children\":[{\"type\":17,\"operand\":\"1\",\"children\":[]},{\"type\":18,\"operand\":1,\"children\":[]}]},{\"type\":0,\"operand\":\"\",\"children\":[{\"type\":17,\"operand\":\"iter\",\"children\":[]}]},{\"type\":6,\"operand\":\"\",\"children\":[{\"type\":17,\"operand\":\"iter\",\"children\":[]},{\"type\":18,\"operand\":2,\"children\":[]}]},{\"type\":97,\"operand\":\"\",\"children\":[{\"type\":66,\"operand\":\"\",\"children\":[{\"type\":17,\"operand\":\"loop\",\"children\":[]}]},{\"type\":0,\"operand\":\"\",\"children\":[{\"type\":99,\"operand\":\"\",\"children\":[{\"type\":1,\"operand\":\"\",\"children\":[{\"type\":17,\"operand\":\"iter\",\"children\":[]}]}]}]},{\"type\":6,\"operand\":\"\",\"children\":[{\"type\":99,\"operand\":\"\",\"children\":[{\"type\":1,\"operand\":\"\",\"children\":[{\"type\":17,\"operand\":\"iter\",\"children\":[]}]}]},{\"type\":32,\"operand\":\"\",\"children\":[{\"type\":1,\"operand\":\"\",\"children\":[{\"type\":99,\"operand\":\"\",\"children\":[{\"type\":33,\"operand\":\"\",\"children\":[{\"type\":1,\"operand\":\"\",\"children\":[{\"type\":17,\"operand\":\"iter\",\"children\":[]}]},{\"type\":18,\"operand\":1,\"children\":[]}]}]}]},{\"type\":1,\"operand\":\"\",\"children\":[{\"type\":99,\"operand\":\"\",\"children\":[{\"type\":33,\"operand\":\"\",\"children\":[{\"type\":1,\"operand\":\"\",\"children\":[{\"type\":17,\"operand\":\"iter\",\"children\":[]}]},{\"type\":18,\"operand\":2,\"children\":[]}]}]}]}]}]},{\"type\":96,\"operand\":\"\",\"children\":[{\"type\":52,\"operand\":\"\",\"children\":[{\"type\":1,\"operand\":\"\",\"children\":[{\"type\":17,\"operand\":\"iter\",\"children\":[]}]},{\"type\":1,\"operand\":\"\",\"children\":[{\"type\":17,\"operand\":\"in\",\"children\":[]}]}]},{\"type\":97,\"operand\":\"\",\"children\":[]},{\"type\":97,\"operand\":\"\",\"children\":[{\"type\":6,\"operand\":\"\",\"children\":[{\"type\":17,\"operand\":\"iter\",\"children\":[]},{\"type\":32,\"operand\":\"\",\"children\":[{\"type\":1,\"operand\":\"\",\"children\":[{\"type\":17,\"operand\":\"iter\",\"children\":[]}]},{\"type\":18,\"operand\":1,\"children\":[]}]}]},{\"type\":64,\"operand\":\"\",\"children\":[{\"type\":67,\"operand\":\"\",\"children\":[{\"type\":17,\"operand\":\"loop\",\"children\":[]}]}]}]}]}]},{\"type\":0,\"operand\":\"\",\"children\":[{\"type\":17,\"operand\":\"output\",\"children\":[]}]},{\"type\":6,\"operand\":\"\",\"children\":[{\"type\":17,\"operand\":\"output\",\"children\":[]},{\"type\":1,\"operand\":\"\",\"children\":[{\"type\":99,\"operand\":\"\",\"children\":[{\"type\":1,\"operand\":\"\",\"children\":[{\"type\":17,\"operand\":\"iter\",\"children\":[]}]}]}]}]}]}]}]}"
// let process = Process()
// process.run(nodeTree:toNode(jsonData:Data(str.utf8)))

let pManager = ProcessManager()
// pManager.scopeStack.stack.last!.declareVar(name:"compare")
// pManager.scopeStack.stack.last!.assignValue(name:"compare", value:IntType(value:1))
pManager.configurate(nodeTree: toNode(jsonData:Data(str.utf8)))
// pManager.processes.append(Process(_processManager:pManager, _nodeTree:))
pManager.run()

pManager.scopeStack.dump()
print("Variable Container")
VariableContainer.dump()